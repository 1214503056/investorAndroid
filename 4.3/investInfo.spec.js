var fs = require('fs');var path = require('path');var cp = require('child_process');var chai = require("chai");var should = chai.should();var JWebDriver = require('jwebdriver');chai.use(JWebDriver.chaiSupportChainPromise);var rootPath = getRootPath();var appPath = '/Users/caribou.apk';var platformName = 'Android';module.exports = function(){    var driver, testVars;    before(function(){        var self = this;        driver = self.driver;        testVars = self.testVars;    });        it('drag: 995, 823, 0, 1057, 0.67', async function(){        await driver.sendActions('drag', {fromX: 995, fromY:823, toX:0, toY:1057, duration: 0.67});    });    it('drag: 1034, 796, 309, 868, 0.53', async function(){        await driver.sendActions('drag', {fromX: 1034, fromY:796, toX:309, toY:868, duration: 0.53});    });    it('tap: 立即体验 ( //*[@text="立即体验"] )', async function(){        await driver.wait('//*[@text="立即体验"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="验证码登录"], equal, 验证码登录', async function(){        await driver.sleep(300).wait('//*[@text="验证码登录"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`验证码登录`));    });    it('tap: 请输入手机号 ( //*[@text="请输入手机号"] )', async function(){        await driver.wait('//*[@text="请输入手机号"]', 30000).sendElementActions('tap');    });    it('sendKeys: 13123456789{ESCAPE}', async function(){        await driver.sendKeys(_(`13123456789{ESCAPE}`));    });    it('tap: 下一步 ( //*[@text="下一步"] )', async function(){        await driver.wait('//*[@text="下一步"]', 30000).sendElementActions('tap');    });    it('tap: 请输入6位验证码 ( //*[@text="请输入6位验证码"] )', async function(){        await driver.wait('//*[@text="请输入6位验证码"]', 30000).sendElementActions('tap');    });    it('sendKeys: 123456{ESCAPE}', async function(){        await driver.sendKeys(_(`123456{ESCAPE}`));    });    it('tap: 登录 ( //*[@text="登录"] )', async function(){        await driver.wait('//*[@text="登录"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="我的"], equal, 我的', async function(){        await driver.sleep(300).wait('//*[@text="我的"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`我的`));    });    it('tap: 我的 ( //*[@text="我的"] )', async function(){        await driver.wait('//*[@text="我的"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="投资偏好"], equal, 投资偏好', async function(){        await driver.sleep(300).wait('//*[@text="投资偏好"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`投资偏好`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="关注轮次"], equal, 关注轮次', async function(){        await driver.sleep(300).wait('//*[@text="关注轮次"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`关注轮次`));    });    it('tap: 取消 ( //*[@text="取消"] )', async function(){        await driver.wait('//*[@text="取消"]', 30000).sendElementActions('tap');    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: Pre-A/A轮 ( //*[@text="Pre-A/A轮"] )', async function(){        await driver.wait('//*[@text="Pre-A/A轮"]', 30000).sendElementActions('tap');    });    it('tap: 确定 ( //*[@text="确定"] )', async function(){        await driver.wait('//*[@text="确定"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="Pre-A/A轮"], equal, Pre-A/A轮', async function(){        await driver.sleep(300).wait('//*[@text="Pre-A/A轮"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`Pre-A/A轮`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: Pre-A/A轮 ( //*[@text="Pre-A/A轮"] )', async function(){        await driver.wait('//*[@text="Pre-A/A轮"]', 30000).sendElementActions('tap');    });    it('tap: 确定 ( //*[@text="确定"] )', async function(){        await driver.wait('//*[@text="确定"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup/android.widget.TextView[2], equal, 未填写', async function(){        await driver.sleep(300).wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup/android.widget.TextView[2]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`未填写`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[2]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[2]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: 电子商务 ( //*[@text="电子商务"] )', async function(){        await driver.wait('//*[@text="电子商务"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="关注领域"], equal, 关注领域', async function(){        await driver.sleep(300).wait('//*[@text="关注领域"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`关注领域`));    });    it('tap: 取消 ( //*[@text="取消"] )', async function(){        await driver.wait('//*[@text="取消"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="企业服务"], equal, 企业服务', async function(){        await driver.sleep(300).wait('//*[@text="企业服务"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`企业服务`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[2]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[2]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: 电子商务 ( //*[@text="电子商务"] )', async function(){        await driver.wait('//*[@text="电子商务"]', 30000).sendElementActions('tap');    });    it('tap: 确定 ( //*[@text="确定"] )', async function(){        await driver.wait('//*[@text="确定"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="企业服务、电子商务"], equal, 企业服务、电子商务', async function(){        await driver.sleep(300).wait('//*[@text="企业服务、电子商务"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`企业服务、电子商务`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[2]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[2]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: 电子商务 ( //*[@text="电子商务"] )', async function(){        await driver.wait('//*[@text="电子商务"]', 30000).sendElementActions('tap');    });    it('tap: 确定 ( //*[@text="确定"] )', async function(){        await driver.wait('//*[@text="确定"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="企业服务"], equal, 企业服务', async function(){        await driver.sleep(300).wait('//*[@text="企业服务"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`企业服务`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[3]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[3]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: 投资币种 ( //*[@text="投资币种"] )', async function(){        await driver.wait('//*[@text="投资币种"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="投资币种"], equal, 投资币种', async function(){        await driver.sleep(300).wait('//*[@text="投资币种"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`投资币种`));    });    it('tap: 取消 ( //*[@text="取消"] )', async function(){        await driver.wait('//*[@text="取消"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[3]/android.widget.TextView[2], equal, 未填写', async function(){        await driver.sleep(300).wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[3]/android.widget.TextView[2]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`未填写`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[3]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[3]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: 美元 ( //*[@text="美元"] )', async function(){        await driver.wait('//*[@text="美元"]', 30000).sendElementActions('tap');    });    it('tap: 确定 ( //*[@text="确定"] )', async function(){        await driver.wait('//*[@text="确定"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="美元"], contain, 美元', async function(){        await driver.sleep(300).wait('//*[@text="美元"]', 30000)               .text()               .should.not.be.a('error')               .should.contain(_(`美元`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[3]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[3]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: 美元 ( //*[@text="美元"] )', async function(){        await driver.wait('//*[@text="美元"]', 30000).sendElementActions('tap');    });    it('tap: 确定 ( //*[@text="确定"] )', async function(){        await driver.wait('//*[@text="确定"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="未填写"], notContain, 美元', async function(){        await driver.sleep(300).wait('//*[@text="未填写"]', 30000)               .text()               .should.not.be.a('error')               .should.not.contain(_(`美元`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[4]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[4]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="投资额度"], equal, 投资额度', async function(){        await driver.sleep(300).wait('//*[@text="投资额度"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`投资额度`));    });    it('tap: //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup', 30000).sendElementActions('tap');    });    it('drag: 504, 1465, 497, 1055, 0.73', async function(){        await driver.sendActions('drag', {fromX: 504, fromY:1465, toX:497, toY:1055, duration: 0.73});    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[5]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[5]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: 北京 ( //*[@text="北京"] )', async function(){        await driver.wait('//*[@text="北京"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="常驻城市"], equal, 常驻城市', async function(){        await driver.sleep(300).wait('//*[@text="常驻城市"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`常驻城市`));    });    it('tap: 取消 ( //*[@text="取消"] )', async function(){        await driver.wait('//*[@text="取消"]', 30000).sendElementActions('tap');    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[5]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[5]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: 上海 ( //*[@text="上海"] )', async function(){        await driver.wait('//*[@text="上海"]', 30000).sendElementActions('tap');    });    it('tap: 确定 ( //*[@text="确定"] )', async function(){        await driver.wait('//*[@text="确定"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="北京、上海"], contain, 上海', async function(){        await driver.sleep(300).wait('//*[@text="北京、上海"]', 30000)               .text()               .should.not.be.a('error')               .should.contain(_(`上海`));    });    it('tap:  ( //*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[5]/android.widget.TextView[3] )', async function(){        await driver.wait('//*[@resource-id="android:id/content"]/android.widget.FrameLayout/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.view.ViewGroup/android.widget.ScrollView/android.view.ViewGroup/android.view.ViewGroup[2]/android.view.ViewGroup[3]/android.view.ViewGroup[5]/android.widget.TextView[3]', 30000).sendElementActions('tap');    });    it('tap: 上海 ( //*[@text="上海"] )', async function(){        await driver.wait('//*[@text="上海"]', 30000).sendElementActions('tap');    });    it('tap: 确定 ( //*[@text="确定"] )', async function(){        await driver.wait('//*[@text="确定"]', 30000).sendElementActions('tap');    });    it('expect: text, //*[@text="北京"], notContain, 上海', async function(){        await driver.sleep(300).wait('//*[@text="北京"]', 30000)               .text()               .should.not.be.a('error')               .should.not.contain(_(`上海`));    });    it('expect: text, //*[@text="投资偏好"], equal, 投资偏好', async function(){        await driver.sleep(300).wait('//*[@text="投资偏好"]', 30000)               .text()               .should.not.be.a('error')               .should.equal(_(`投资偏好`));    });    function _(str){        if(typeof str === 'string'){            return str.replace(/\{\{(.+?)\}\}/g, function(all, key){                return testVars[key] || '';            });        }        else{            return str;        }    }};if(module.parent && /mocha\.js/.test(module.parent.id)){    runThisSpec();}function runThisSpec(){    // read config    var config = require(rootPath + '/config.json');    var webdriverConfig = Object.assign({},config.webdriver);    var host = webdriverConfig.host;    var port = webdriverConfig.port || 4444;    var testVars = config.vars;    var screenshotPath = rootPath + '/screenshots';    var doScreenshot = fs.existsSync(screenshotPath);    var specName = path.relative(rootPath, __filename).replace(/\\/g,'/').replace(/\.js$/,'');    var arrDeviceList = getEnvList() || getDeviceList(platformName);    if(arrDeviceList.length ===0 ){        console.log('Search mobile device failed!');        process.exit(1);    }    arrDeviceList.forEach(function(device){        var caseName = specName + ' : ' + (device.name?device.name+' ['+device.udid+']':device.udid);        if(doScreenshot){            mkdirs(path.dirname(screenshotPath + '/' + caseName));        }        describe(caseName, function(){            var stepId = 1;            this.timeout(600000);            this.slow(1000);            before(function(){                var self = this;                var driver = new JWebDriver({                    'host': host,                    'port': port                });                self.driver = driver.session({                    'platformName': platformName,                    'udid': device.udid,                    'app': /^(\/|[a-z]:\\|https?:\/\/)/i.test(appPath) ? appPath : rootPath + '/' + appPath                });                self.testVars = testVars;                return self.driver;            });            module.exports();            afterEach(function(){                if(doScreenshot){                    var filepath = screenshotPath + '/' + caseName.replace(/[^\/]+$/, function(all){                        return all.replace(/\s*[:\.\:\-\s]\s*/g, '_');                    }) + '_' + (stepId++);                    return this.driver.getScreenshot(filepath + '.png').source().then(function(code){                        fs.writeFileSync(filepath + '.json', code);                    }).catch(function(){});                }            });            after(function(){                return this.driver.close();            });        });    });}function getRootPath(){    var rootPath = path.resolve(__dirname);    while(rootPath){        if(fs.existsSync(rootPath + '/config.json')){            break;        }        rootPath = rootPath.substring(0, rootPath.lastIndexOf(path.sep));    }    return rootPath;}function mkdirs(dirname){    if(fs.existsSync(dirname)){        return true;    }else{        if(mkdirs(path.dirname(dirname))){            fs.mkdirSync(dirname);            return true;        }    }}function callSpec(name){    try{        require(rootPath + '/' + name)();    }    catch(e){        console.log(e)        process.exit(1);    }}function getEnvList(){    var strEnvList = process.env.devices;    if(strEnvList){        return strEnvList.split(/\s*,\s*/).map(function(udid){            return {udid: udid};        });    }}function getDeviceList(platformName){    var arrDeviceList = [];    var strText, match;    if(platformName === 'Android')    {        // for android        strText = cp.execSync('adb devices').toString();        strText.replace(/(.+?)\s+device\r?\n/g, function(all, deviceName){            arrDeviceList.push({                udid: deviceName            });        });    }    else{        // ios real device        strText = cp.execSync('idevice_id -l').toString();        strText.replace(/(.+)\r?\n/g, function(all, udid){            var deviceName = cp.execSync('idevice_id -d '+udid).toString();            deviceName = deviceName.replace(/\r?\n/g, '');            arrDeviceList.push({                name: deviceName,                udid: udid            });        });        // ios simulator        strText = cp.execSync('xcrun simctl list devices').toString();        strText.replace(/\r?\n\s*(.+?)\s+\((.+?)\) \(Booted\)/g, function(all, deviceName, udid){            arrDeviceList.push({                name: deviceName,                udid: udid            });        });    }    return arrDeviceList;}